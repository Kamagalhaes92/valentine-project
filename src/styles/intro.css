/* =========================
   INTRO THEME VARIABLES
========================= */
:root {
  --rose: #e8b8c0; /* dusty rose */
  --rose-deep: #d78a98;
  --cream: #fff7f5;
  --ink: #3a2b2e;
}

/* =========================
   LAYOUT WRAPPERS
========================= */
.intro {
  height: calc(var(--vh, 1vh) * 100);
  width: 100vw;
  overflow: hidden;
}

.introTitle {
  margin: 0;
  font-family: "Gorditas", sans-serif;
  font-size: clamp(28px, 5vw, 56px);
  letter-spacing: 0.5px;

  color: #6c95bf;

  /* pink outline */
  -webkit-text-stroke: 2px rgba(255, 120, 170, 0.9);

  text-shadow:
    0 2px 0 rgba(255, 255, 255, 0.7),
    0 20px 45px rgba(0, 0, 0, 0.18);
}

.titleSub {
  margin-top: 6px;
  font-size: clamp(14px, 2vw, 18px);
  font-family: "Cormorant Garamond", serif;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: rgba(58, 43, 46, 0.65);
}
/* =========================
   3D GLASS TITLE
========================= */

.titleWrap {
  position: absolute;
  top: clamp(70px, 10vh, 120px);
  left: 50%;
  transform: translateX(-50%);
  z-index: 20;

  width: min(760px, 92vw);
  padding: 18px 22px 14px;

  border-radius: 32px;

  /* layered glass */
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.72),
    rgba(255, 255, 255, 0.28)
  );

  border: 1px solid rgba(255, 255, 255, 0.65);

  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);

  /* depth stack */
  box-shadow:
    0 28px 70px rgba(0, 0, 0, 0.16),
    0 0 45px rgba(255, 180, 220, 0.35),
    inset 0 2px 0 rgba(255, 255, 255, 0.85),
    inset 0 -18px 30px rgba(255, 170, 210, 0.18);

  text-align: center;
  overflow: hidden;
}
/* glow aura behind the title */
.titleWrap::before {
  content: "";
  position: absolute;
  inset: -30px;
  border-radius: 40px;

  background: radial-gradient(
    ellipse at center,
    rgba(255, 190, 230, 0.65),
    rgba(255, 220, 245, 0.45),
    transparent 70%
  );

  filter: blur(35px);
  opacity: 0.75;
  z-index: -1;
}

/* shiny highlight band */
.titleWrap::after {
  content: "";
  position: absolute;
  left: 8%;
  right: 8%;
  top: 10px;
  height: 14px;
  border-radius: 999px;
  background: linear-gradient(
    to right,
    transparent,
    rgba(255, 255, 255, 0.65),
    transparent
  );
  opacity: 0.55;
}

/* tiny bounce on the emoji */
.titleEmoji {
  display: inline-block;
  transform: translateY(4px);
  animation: emojiFloat 2.8s ease-in-out infinite;
}

@keyframes emojiFloat {
  0%,
  100% {
    transform: translateY(4px);
  }
  50% {
    transform: translateY(-2px);
  }
}

.bubble--glass {
  background: rgba(255, 255, 255, 0.35);
  border: 1px solid rgba(255, 255, 255, 0.55);
  backdrop-filter: blur(10px);
  color: rgba(58, 43, 46, 0.9);
  font-family: "Cormorant Garamond", serif;
}

.caret {
  display: inline-block;
  width: 10px;
  height: 18px;
  margin-left: 6px;
  border-right: 2px solid rgba(58, 43, 46, 0.55);
  animation: blink 0.9s steps(1) infinite;
  transform: translateY(2px);
}

@keyframes blink {
  50% {
    opacity: 0;
  }
}

.scene {
  position: relative;
  width: 100vw;
  height: 100svh; /* iOS safe viewport */
  height: 100dvh; /* dynamic viewport */
  height: 100vh; /* fallback */
  height: 100dvh;
  overflow: hidden;

  background-color: #fff; /* prevents black flash if image fails */
  background-image: url("/background.png");
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
}

/* blur overlay that fades out after load */
.scene::before {
  content: "";
  position: absolute;
  inset: 0;
  background: inherit;
  filter: blur(6px) saturate(1.05);
  transform: scale(1.04);
  opacity: 1;
  transition:
    filter 1.6s ease,
    opacity 1.6s ease;
  z-index: 0;
}

.scene.isLoaded::before {
  filter: blur(0px) saturate(1);
  opacity: 0;
}

/* subtle grain */
.scene::after {
  content: "";
  position: absolute;
  inset: -20%;
  pointer-events: none;
  background-image: url("/grain.png");
  background-size: 420px 420px;
  opacity: 0.12;
  mix-blend-mode: overlay;
  animation: grainMove 6s steps(6) infinite;
  z-index: 6;
}

@keyframes grainMove {
  0% {
    transform: translate(0, 0);
  }
  20% {
    transform: translate(-2%, 1%);
  }
  40% {
    transform: translate(1%, -2%);
  }
  60% {
    transform: translate(-1%, -1%);
  }
  80% {
    transform: translate(2%, 1%);
  }
  100% {
    transform: translate(0, 0);
  }
}

/* vignette for depth */
.vignette {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(
    ellipse at center,
    rgba(0, 0, 0, 0) 55%,
    rgba(40, 18, 24, 0.22) 100%
  );
  z-index: 5;
}

/* =========================
   TOP UI
========================= */

/* =========================
   HAMBURGER MENU (SLEEK GLASS)
========================= */

.menu {
  position: absolute;
  top: 16px;
  left: 16px;
  z-index: 220;
}

/* button */
.menuBtn {
  width: 54px;
  height: 54px;
  border-radius: 18px;
  border: 1px solid rgba(255, 255, 255, 0.65);

  background: linear-gradient(
    135deg,
    rgba(255, 214, 240, 0.55),
    rgba(175, 235, 255, 0.38)
  );
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);

  box-shadow:
    0 18px 44px rgba(0, 0, 0, 0.16),
    0 0 30px rgba(255, 140, 190, 0.18),
    inset 0 1px 0 rgba(255, 255, 255, 0.75);

  display: grid;
  place-items: center;
  gap: 6px;
  cursor: pointer;
  transition:
    transform 140ms ease,
    filter 140ms ease;
}

.menuBtn:hover {
  filter: brightness(1.03);
}
.menuBtn:active {
  transform: translateY(2px) scale(0.98);
}

.menuBtn span {
  width: 22px;
  height: 2px;
  border-radius: 999px;
  background: rgba(241, 108, 104, 0.92);
  transition:
    transform 180ms ease,
    opacity 180ms ease;
}

/* turn into X */
.menuBtn.isOpen span:nth-child(1) {
  transform: translateY(8px) rotate(45deg);
}
.menuBtn.isOpen span:nth-child(2) {
  opacity: 0;
}
.menuBtn.isOpen span:nth-child(3) {
  transform: translateY(-8px) rotate(-45deg);
}

/* backdrop */
.menuBackdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.18);
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
  border: none;
  z-index: 210;
}

/* panel */
.menuPanel {
  position: absolute;
  top: 64px;
  left: 0;
  width: min(300px, 78vw);
  padding: 14px;
  border-radius: 20px;

  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.7),
    rgba(255, 235, 245, 0.34)
  );
  border: 1px solid rgba(255, 255, 255, 0.7);

  box-shadow:
    0 28px 70px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);

  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);

  z-index: 230;

  transform-origin: 10% 0%;
  animation: menuPop 220ms ease both;
}

@keyframes menuPop {
  from {
    opacity: 0;
    transform: translateY(-6px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.menuHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.menuTitle {
  font-family: "Gorditas", serif;
  font-size: 14px;
  font-weight: 900;
  color: rgba(58, 43, 46, 0.9);
  text-shadow: 0 10px 22px rgba(0, 0, 0, 0.1);
}

.socialRow,
.aboutSocialRow {
  display: flex;
  gap: 8px;
  align-items: center;
}

.socialLink {
  width: 36px;
  height: 36px;
  border-radius: 14px;
  display: grid;
  place-items: center;

  background: rgba(255, 255, 255, 0.55);
  border: 1px solid rgba(255, 255, 255, 0.7);

  box-shadow:
    0 10px 22px rgba(0, 0, 0, 0.12),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);

  transition:
    transform 140ms ease,
    filter 140ms ease;
}

.socialLink:hover {
  transform: translateY(-2px);
  filter: brightness(1.03);
}
.socialLink:active {
  transform: translateY(1px) scale(0.99);
}

.socialIcon {
  width: 18px;
  height: 18px;
  color: rgba(241, 108, 104, 0.95);
}

/* menu items */
.menuItem {
  width: 100%;
  text-align: left;
  padding: 12px 12px;
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.55);
  background: rgba(255, 255, 255, 0.22);

  color: rgba(58, 43, 46, 0.92);
  font-weight: 750;
  font-family: "Cormorant Garamond", serif;
  font-size: 16px;

  cursor: pointer;
  transition:
    transform 120ms ease,
    background 120ms ease;
  margin-bottom: 10px;

  display: flex;
  align-items: center;
  gap: 10px;
}

.menuItem:hover {
  background: rgba(255, 255, 255, 0.3);
}
.menuItem:active {
  transform: translateY(2px) scale(0.99);
}

.menuEmoji {
  width: 22px;
  display: inline-grid;
  place-items: center;
}

/* About modal (basic styling if you need) */
.aboutModal {
  position: fixed;
  z-index: 240;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);

  width: min(420px, 90vw);
  border-radius: 22px;
  padding: 16px;

  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.8),
    rgba(255, 235, 245, 0.4)
  );
  border: 1px solid rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);

  box-shadow: 0 40px 100px rgba(0, 0, 0, 0.25);
}

.aboutHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.aboutTitle {
  font-family: "Gorditas", serif;
  font-size: 18px;
  font-weight: 900;
  color: rgba(58, 43, 46, 0.92);
}

.aboutClose {
  border: none;
  cursor: pointer;
  width: 38px;
  height: 38px;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.65);
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.12);
}

.aboutText {
  font-family: "Cormorant Garamond", serif;
  font-size: 16px;
  color: rgba(58, 43, 46, 0.9);
  line-height: 1.35;
  margin: 0 0 14px;
}

.aboutActions {
  display: flex;
  justify-content: flex-end;
  margin-top: 14px;
}

.aboutBtn {
  border: none;
  cursor: pointer;
  padding: 10px 14px;
  border-radius: 16px;
  background: rgba(94, 198, 222, 0.85);
  color: rgba(58, 43, 46, 0.95);
  font-weight: 900;
}

/* =========================
   ABOUT MODAL
========================= */
.aboutModal {
  position: fixed;
  z-index: 240;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);

  width: min(420px, 90vw);
  border-radius: 22px;
  padding: 18px;

  /* ✅ more solid background = readable */
  background: rgba(255, 255, 255, 0.92);
  border: 1px solid rgba(255, 255, 255, 0.9);

  /* ✅ reduce blur (or remove) */
  backdrop-filter: none;
  -webkit-backdrop-filter: none;

  box-shadow:
    0 40px 110px rgba(0, 0, 0, 0.28),
    0 10px 28px rgba(0, 0, 0, 0.18);
}

.aboutHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 8px;
}

.aboutTitle {
  font-family: "Gorditas", sans-serif;
  font-size: 22px;
  color: rgba(58, 43, 46, 0.92);
}

.aboutClose {
  border: none;
  background: #8f617a;
  border: 1px solid rgba(255, 255, 255, 0.55);
  width: 40px;
  height: 40px;
  border-radius: 999px;
  cursor: pointer;
}

.aboutText {
  margin: 0;
  font-size: 16px;
  line-height: 1.35;
  color: rgba(58, 43, 46, 0.78);
  font-family: "Cormorant Garamond", serif;
}

.aboutActions {
  display: flex;
  justify-content: flex-end;
  margin-top: 12px;
}

.aboutBtn {
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.6);
  background: rgba(255, 255, 255, 0.25);
  cursor: pointer;
}
.musicToggle {
  position: absolute;
  top: 16px;
  right: 16px;
  border: none;
  background: rgba(255, 255, 255, 0.82);
  border-radius: 14px;
  padding: 10px 12px;
  cursor: pointer;
  z-index: 20;
  box-shadow: 0 8px 22px rgba(0, 0, 0, 0.08);
}

.musicToggle:active {
  transform: scale(0.98);
}

.decorTop {
  position: absolute;
  top: -10rem;
  left: 50%;
  transform: translateX(-50%);
  width: min(520px, 85vw);
  height: auto;
  pointer-events: none;
  z-index: 2;
}

/* =========================
   HEART TRAIL
========================= */
.heart {
  position: absolute;
  width: 65px;
  height: 65px;
  background: url("/heart.png") center / contain no-repeat;
  opacity: 0.95;
  z-index: 2;
}

/* =========================
   DUCK + BUBBLE
========================= */
.duck {
  position: absolute;
  width: 20rem;
  height: 20rem;
  background: url("/duck.png") center / contain no-repeat;

  /* ✅ you said you switched to this */
  transform: translate(-50%, -50%);
  transition: left 140ms linear;
  z-index: 3;
}

/* flip duck */
.duck--left {
  transform: translate(-50%, -50%) scaleX(-1);
}

/* hop animation */
.duck--jump {
  animation: hop 220ms ease-out;
}

/* hop for normal facing */
@keyframes hop {
  0% {
    transform: translate(-50%, -50%);
  }
  50% {
    transform: translate(-50%, -62%);
  }
  100% {
    transform: translate(-50%, -50%);
  }
}

/* hop for flipped duck */
.duck.duck--left.duck--jump {
  animation: hopLeft 220ms ease-out;
}

@keyframes hopLeft {
  0% {
    transform: translate(-50%, -50%) scaleX(-1);
  }
  50% {
    transform: translate(-50%, -62%) scaleX(-1);
  }
  100% {
    transform: translate(-50%, -50%) scaleX(-1);
  }
}

/* bubble */
.bubble {
  position: absolute;
  transform: translate(-50%, -50%);
  z-index: 8;

  max-width: min(560px, 88vw);
  padding: 14px 16px;
  border-radius: 18px;

  /* modern glass */
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.58),
    rgba(255, 255, 255, 0.28)
  );
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);

  border: 1px solid rgba(255, 255, 255, 0.55);
  box-shadow:
    0 18px 50px rgba(0, 0, 0, 0.14),
    inset 0 1px 0 rgba(255, 255, 255, 0.75);

  color: rgba(58, 43, 46, 0.92);
  font-family: "Cormorant Garamond", serif;
  font-size: 18px;
  line-height: 1.2;
}

/* cute shine */
.bubble::before {
  content: "";
  position: absolute;
  left: 10%;
  right: 10%;
  top: 8px;
  height: 12px;
  border-radius: 999px;
  background: linear-gradient(
    to right,
    transparent,
    rgba(255, 255, 255, 0.65),
    transparent
  );
  opacity: 0.55;
}

/* tail */
.bubble::after {
  content: "";
  position: absolute;
  left: 22%;
  bottom: -8px;
  width: 14px;
  height: 14px;
  background: rgba(255, 255, 255, 0.42);
  border-right: 1px solid rgba(255, 255, 255, 0.45);
  border-bottom: 1px solid rgba(255, 255, 255, 0.45);
  transform: rotate(45deg);
  backdrop-filter: blur(10px);
}

/* =========================
   DOOR
========================= */
.door {
  position: absolute;
  right: 2%;
  bottom: 18%; /* ✅ adjust this to match floor line */
  width: min(40vw, 520px);
  height: min(52vh, 520px);
  background: url("/door.png") center / contain no-repeat;
  border: none;
  cursor: pointer;
  z-index: 2;
}

.door:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  filter: grayscale(0.4);
}

.door--glow {
  transform: scale(1.2);
  transition: transform 0.3s ease-in-out;
}

.enterBtn {
  position: absolute;
  left: 78%;
  top: 72%; /* tweak to sit under the door */
  transform: translate(-50%, -50%);
  z-index: 30;

  padding: 12px 16px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.6);

  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.62),
    rgba(255, 255, 255, 0.25)
  );
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);

  box-shadow:
    0 16px 45px rgba(0, 0, 0, 0.14),
    0 0 0 4px rgba(255, 212, 234, 0.18);

  color: rgba(58, 43, 46, 0.92);
  font-weight: 700;
  cursor: pointer;

  animation: enterPulse 1.9s ease-in-out infinite;
}

@keyframes enterPulse {
  0%,
  100% {
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    transform: translate(-50%, -50%) scale(1.06);
  }
}

.enterBtn:active {
  transform: translate(-50%, -50%) scale(0.98);
}

@media (max-width: 420px) {
  .enterBtn {
    top: 74%;
    left: 80%;
    padding: 10px 14px;
    font-size: 14px;
  }
}

/* =========================
   DOOR TRANSITION OVERLAY
========================= */
.doorTransition {
  position: absolute;
  inset: 0;
  z-index: 999;
  overflow: hidden;

  background: radial-gradient(
    circle at 50% 40%,
    #b9f3fb 0%,
    #77d1e0 48%,
    #2aa8c2 82%,
    #0b4f6a 100%
  );

  animation: transIn 320ms ease-out forwards;
}

@keyframes transIn {
  from {
    opacity: 0;
    transform: scale(1.02);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* stars */
.doorStars {
  position: absolute;
  inset: -20%;
  background-image:
    radial-gradient(rgba(255, 255, 255, 0.95) 1px, transparent 1.6px),
    radial-gradient(rgba(255, 255, 255, 0.7) 1px, transparent 1.6px),
    radial-gradient(rgba(255, 255, 255, 0.45) 1px, transparent 1.6px);
  background-size:
    60px 60px,
    110px 110px,
    160px 160px;
  background-position:
    0 0,
    25px 40px,
    60px 10px;
  opacity: 0.65;
  animation: starDrift 2.8s linear infinite;
}

@keyframes starDrift {
  to {
    transform: translateY(60px);
  }
}

/* =========================
   CSS-ONLY FLOATING HEARTS
========================= */
/* this element spawns many hearts via box-shadow */
/* Floating heart PNG layer */
.doorHearts {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;
}

/* we create multiple hearts using pseudo elements + box-shadow */
.doorHearts::before,
.doorHearts::after {
  content: "";
  position: absolute;
  left: 0;
  top: 110%;
  width: 46px;
  height: 46px;
  background: url("/heartasset.png") center / contain no-repeat;
  opacity: 0.35;
  filter: blur(0.2px);

  animation: heartsUp 2.8s linear infinite;
}

/* smaller faster layer */
.doorHearts::after {
  width: 26px;
  height: 26px;
  opacity: 0.25;
  animation-duration: 2.2s;
  animation-delay: -1.1s;
}

/* MANY copies across the screen */
.doorHearts::before {
  box-shadow:
    4vw 0vh rgba(0, 0, 0, 0),
    10vw 18vh rgba(0, 0, 0, 0),
    16vw 8vh rgba(0, 0, 0, 0),
    22vw 28vh rgba(0, 0, 0, 0),
    28vw 14vh rgba(0, 0, 0, 0),
    34vw 34vh rgba(0, 0, 0, 0),
    40vw 6vh rgba(0, 0, 0, 0),
    46vw 26vh rgba(0, 0, 0, 0),
    52vw 12vh rgba(0, 0, 0, 0),
    58vw 32vh rgba(0, 0, 0, 0),
    64vw 18vh rgba(0, 0, 0, 0),
    70vw 38vh rgba(0, 0, 0, 0),
    76vw 10vh rgba(0, 0, 0, 0),
    82vw 28vh rgba(0, 0, 0, 0),
    88vw 16vh rgba(0, 0, 0, 0),
    94vw 36vh rgba(0, 0, 0, 0);
}

/* smaller layer positions */
.doorHearts::after {
  box-shadow:
    6vw 10vh rgba(0, 0, 0, 0),
    12vw 30vh rgba(0, 0, 0, 0),
    18vw 20vh rgba(0, 0, 0, 0),
    26vw 40vh rgba(0, 0, 0, 0),
    32vw 12vh rgba(0, 0, 0, 0),
    40vw 34vh rgba(0, 0, 0, 0),
    48vw 18vh rgba(0, 0, 0, 0),
    56vw 44vh rgba(0, 0, 0, 0),
    62vw 26vh rgba(0, 0, 0, 0),
    70vw 46vh rgba(0, 0, 0, 0),
    78vw 16vh rgba(0, 0, 0, 0),
    86vw 38vh rgba(0, 0, 0, 0),
    92vw 24vh rgba(0, 0, 0, 0);
}

/* floating animation with sway */
@keyframes heartsUp {
  0% {
    transform: translateY(0) translateX(0) rotate(0deg);
    opacity: 0;
  }
  10% {
    opacity: 0.9;
  }
  50% {
    transform: translateY(-85vh) translateX(-18px) rotate(-10deg);
  }
  100% {
    transform: translateY(-170vh) translateX(28px) rotate(18deg);
    opacity: 0;
  }
}
/* =========================
   BALLOONS
========================= */
.balloon {
  position: absolute;
  bottom: 20px;
  width: min(280px, 35vw);
  height: auto;
  pointer-events: none;
  z-index: 2;
  animation: floatSway 6s ease-in-out infinite;
}

.balloon--left {
  left: 12%;
}

.balloon--right {
  right: 12%;
  animation-delay: 0.8s;
}

@keyframes floatSway {
  0% {
    transform: translate(0px, 0px) rotate(0deg);
  }
  25% {
    transform: translate(6px, -6px) rotate(1deg);
  }
  50% {
    transform: translate(0px, -10px) rotate(0deg);
  }
  75% {
    transform: translate(-6px, -6px) rotate(-1deg);
  }
  100% {
    transform: translate(0px, 0px) rotate(0deg);
  }
}

/* =========================
   MOBILE CONTROLS
========================= */
/* =========================
   SLEEK GLASS CONTROLS
========================= */

.controls {
  position: absolute;
  left: 50%;
  bottom: calc(env(safe-area-inset-bottom) + 14px);
  transform: translateX(-50%);
  z-index: 30;

  display: flex;
  gap: 12px;
  padding: 8px 10px;

  border-radius: 999px;

  /* ultra subtle glass tray */
  background: rgba(255, 255, 255, 0.18);
  border: 1px solid rgba(255, 255, 255, 0.35);

  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);

  box-shadow:
    0 20px 45px rgba(0, 0, 0, 0.18),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

/* individual buttons */
.ctrl {
  width: 60px;
  height: 52px;

  border-radius: 16px;
  border: 1px solid rgba(255, 200, 230, 0.6);

  background: linear-gradient(
    to bottom,
    rgba(255, 230, 245, 0.7),
    rgba(220, 245, 255, 0.35)
  );

  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);

  box-shadow:
    0 16px 32px rgba(255, 150, 200, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.85);

  display: grid;
  place-items: center;

  font-size: 20px;
  font-weight: 600;
  color: rgba(60, 40, 60, 0.85);

  transition:
    transform 140ms cubic-bezier(0.2, 0.8, 0.2, 1),
    box-shadow 140ms ease,
    filter 140ms ease;

  -webkit-tap-highlight-color: transparent;
}

/* hover (desktop only) */
@media (hover: hover) {
  .ctrl:hover {
    transform: translateY(-2px);
    box-shadow:
      0 22px 38px rgba(255, 150, 210, 0.35),
      0 0 22px rgba(140, 210, 255, 0.35),
      inset 0 1px 0 rgba(255, 255, 255, 0.95);
  }
}

/* press down effect */
.ctrl:active {
  transform: translateY(3px) scale(0.97);

  box-shadow:
    0 10px 20px rgba(255, 120, 190, 0.35),
    0 0 25px rgba(120, 200, 255, 0.45),
    inset 0 1px 0 rgba(255, 255, 255, 0.6);

  filter: brightness(1.05);
}

.ctrl::after {
  content: "";
  position: absolute;
  inset: -6px;
  border-radius: 20px;
  background: radial-gradient(
    circle,
    rgba(255, 180, 220, 0.35),
    rgba(140, 220, 255, 0.25),
    transparent 70%
  );
  filter: blur(12px);
  opacity: 0.6;
  z-index: -1;
}

/* smaller phones */
@media (max-width: 420px) {
  .ctrl {
    width: 54px;
    height: 48px;
    font-size: 18px;
  }
}
button,
.door {
  cursor: url("/heartasset.png"), pointer;
}

.musicToggle--fancy {
  width: 52px;
  height: 52px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  background: rgba(255, 255, 255, 0.25);
  border: 1px solid rgba(255, 255, 255, 0.5);
  backdrop-filter: blur(10px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
}

.musicToggle--fancy::after {
  content: "";
  position: absolute;
  inset: -6px;
  border-radius: inherit;
  background: radial-gradient(
    circle,
    rgba(255, 212, 234, 0.75),
    transparent 70%
  );
  opacity: 0.55;
  filter: blur(8px);
  z-index: -1;
  animation: pulse 2.6s ease-in-out infinite;
}

.musicIcon {
  font-size: 20px;
}

@keyframes pulse {
  0%,
  100% {
    transform: scale(0.98);
    opacity: 0.5;
  }
  50% {
    transform: scale(1.08);
    opacity: 0.85;
  }
}

.door--magic {
  position: absolute;
  border: none;
  background: url("/door.png") center / contain no-repeat;
  isolation: isolate; /* keeps glow layers neat */
}

/* soft pulsing glow when duck is close */
.door--magic.door--active {
  animation: doorPulse 2.2s ease-in-out infinite;
  filter: drop-shadow(0 0 18px rgba(255, 212, 234, 0.9));
}

@keyframes doorPulse {
  0%,
  100% {
    transform: scale(1.02);
  }
  50% {
    transform: scale(1.07);
  }
}

/* light rays */
.doorRays {
  position: absolute;
  inset: -40%;
  z-index: -1;
  background: conic-gradient(
    from 0deg,
    transparent,
    rgba(255, 220, 240, 0.65),
    transparent,
    rgba(255, 220, 240, 0.45),
    transparent
  );
  filter: blur(10px);
  opacity: 0;
  transition: opacity 280ms ease;
  animation: raysSpin 3.8s linear infinite;
}

.door--magic.door--active .doorRays {
  opacity: 0.9;
}

@keyframes raysSpin {
  to {
    transform: rotate(360deg);
  }
}

/* sparkle particles */
.sparkle {
  position: absolute;
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 1),
    rgba(255, 255, 255, 0)
  );
  box-shadow: 0 0 18px rgba(255, 212, 234, 1);
  z-index: 4;
  animation: sparklePop ease-out forwards;
}

@keyframes sparklePop {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.2);
  }
  30% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -80%) scale(0.2);
  }
}

/* =========================
   RESPONSIVE
========================= */
@media (max-width: 768px) {
  .introTitle {
    top: 68px;
  }
  .duck {
    width: 10rem;
    height: 10rem;
  }

  .door {
    right: 5%;
    bottom: 14%; /* slightly higher because floor takes more space */
    width: 38vw;
    height: 44vh;
  }

  .bubble {
    font-size: 15px;
    padding: 10px 12px;
    margin-left: 2rem;
  }

  .balloon {
    width: 28vw;
    bottom: 10px;
  }

  .decorTop {
    width: 70vw;
    top: -7rem;
  }

  .heart {
    width: 25px;
    height: 25px;
  }

  .titleWrap {
    top: 88px;
    padding: 10px 12px;
  }

  .controls {
    bottom: 14px;
  }

  .ctrl {
    width: 64px;
    height: 56px;
  }
}

@media (max-width: 980px) and (orientation: landscape) {
  .titleWrap {
    top: 10px;
    padding: 8px 12px;
  }

  .introTitle {
    font-size: clamp(22px, 4vw, 36px);
  }

  .decorTop {
    top: -9rem;
    width: min(420px, 70vw);
    opacity: 0.85;
  }

  .duck {
    width: 8rem;
    height: 8rem;
  }

  .bubble {
    font-size: 14px;
    max-width: min(520px, 78vw);
    padding: 10px 12px;
  }

  .door {
    width: min(32vw, 420px);
    height: min(56vh, 420px);
    bottom: 10%;
  }

  .balloon {
    width: 22vw;
    bottom: 4px;
    opacity: 0.9;
  }

  .controls {
    bottom: calc(env(safe-area-inset-bottom) + 8px);
  }

  .ctrl {
    width: 56px;
    height: 48px;
  }
}
